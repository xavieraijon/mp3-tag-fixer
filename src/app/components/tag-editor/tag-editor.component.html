<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/30 backdrop-blur-sm">
    <div class="backdrop-blur-xl bg-white/80 rounded-3xl shadow-2xl w-full max-w-lg border border-white/50 overflow-hidden">
        <!-- Header with Cover -->
        <div class="p-5 border-b border-white/30 flex items-center gap-4 bg-white/30">
            @if (coverImageUrl()) {
                <img
                    [src]="coverImageUrl()"
                    alt="Cover"
                    class="w-16 h-16 rounded-xl object-cover shadow-lg border border-white/30 flex-shrink-0"
                >
            } @else {
                <div class="w-16 h-16 rounded-xl bg-blue-500/20 flex items-center justify-center flex-shrink-0">
                    <lucide-icon name="music" class="w-8 h-8 text-blue-600"></lucide-icon>
                </div>
            }
            <div class="flex-1 min-w-0">
                <h2 class="text-lg font-bold text-slate-800 truncate">{{ title() || 'Edit Tags' }}</h2>
                <p class="text-sm text-slate-500 truncate">{{ artist() || 'Unknown Artist' }}</p>
            </div>
            <button (click)="cancel.emit()" class="p-2 text-slate-400 hover:text-slate-600 hover:bg-white/50 rounded-xl transition-all flex-shrink-0">
                <lucide-icon name="x" class="w-5 h-5"></lucide-icon>
            </button>
        </div>

        <!-- Form -->
        <div class="p-5 space-y-4">
            <!-- Artist & Title Row -->
            <div class="grid grid-cols-2 gap-4">
                <div class="space-y-1.5">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Artist</label>
                    <input
                        type="text"
                        [ngModel]="artist()"
                        (ngModelChange)="artist.set($event)"
                        class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all"
                        placeholder="Artist Name">
                </div>
                <div class="space-y-1.5">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Title</label>
                    <input
                        type="text"
                        [ngModel]="title()"
                        (ngModelChange)="title.set($event)"
                        class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all"
                        placeholder="Track Title">
                </div>
            </div>

            <!-- Album & Year Row -->
            <div class="grid grid-cols-2 gap-4">
                <div class="space-y-1.5">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Album</label>
                    <input
                        type="text"
                        [ngModel]="album()"
                        (ngModelChange)="album.set($event)"
                        class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all"
                        placeholder="Album Name">
                </div>
                <div class="space-y-1.5">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Year</label>
                    <input
                        type="number"
                        [ngModel]="year()"
                        (ngModelChange)="year.set($event)"
                        class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all"
                        placeholder="YYYY">
                </div>
            </div>

            <!-- Genre & BPM Row -->
            <div class="grid grid-cols-2 gap-4">
                <div class="space-y-1.5">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Genre</label>
                    <input
                        type="text"
                        [ngModel]="genre()"
                        (ngModelChange)="genre.set($event)"
                        class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all"
                        placeholder="Genre">
                </div>
                <div class="space-y-1.5">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">BPM</label>
                    <input
                        type="number"
                        [ngModel]="bpm()"
                        (ngModelChange)="bpm.set($event)"
                        class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all"
                        placeholder="128">
                </div>
            </div>

            <!-- Label & Album Artist Row -->
            <div class="grid grid-cols-2 gap-4">
                <div class="space-y-1.5">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Label</label>
                    <input
                        type="text"
                        [ngModel]="label()"
                        (ngModelChange)="label.set($event)"
                        class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all"
                        placeholder="Record Label">
                </div>
                <div class="space-y-1.5">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Album Artist</label>
                    <input
                        type="text"
                        [ngModel]="albumArtist()"
                        (ngModelChange)="albumArtist.set($event)"
                        class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all"
                        placeholder="Album Artist">
                </div>
            </div>

            <!-- Track & Disc Number Row -->
            <div class="grid grid-cols-3 gap-4">
                <div class="space-y-1.5">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Track #</label>
                    <input
                        type="number"
                        [ngModel]="trackNumber()"
                        (ngModelChange)="trackNumber.set($event)"
                        class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all"
                        placeholder="1"
                        min="1">
                </div>
                <div class="space-y-1.5">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Disc #</label>
                    <input
                        type="text"
                        [ngModel]="discNumber()"
                        (ngModelChange)="discNumber.set($event)"
                        class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all"
                        placeholder="1/2">
                </div>
                <div class="space-y-1.5">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Composer</label>
                    <input
                        type="text"
                        [ngModel]="composer()"
                        (ngModelChange)="composer.set($event)"
                        class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all"
                        placeholder="Composer">
                </div>
            </div>

            <!-- Comment Row -->
            <div class="space-y-1.5">
                <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Comment</label>
                <textarea
                    [ngModel]="comment()"
                    (ngModelChange)="comment.set($event)"
                    rows="2"
                    class="w-full px-4 py-2.5 bg-white/50 border border-white/50 rounded-xl text-slate-800 focus:outline-none focus:bg-white/70 focus:border-blue-400/50 focus:ring-2 focus:ring-blue-400/20 transition-all resize-none"
                    placeholder="Additional notes..."></textarea>
            </div>
        </div>

        <!-- Footer -->
        <div class="p-5 border-t border-white/30 flex justify-end gap-3 bg-white/20">
            <button
                (click)="cancel.emit()"
                class="px-5 py-2.5 text-slate-600 hover:text-slate-800 font-medium hover:bg-white/50 rounded-xl transition-all">
                Cancel
            </button>
            <button
                (click)="onSave()"
                class="px-6 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-bold rounded-xl shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40 transition-all">
                Save Changes
            </button>
        </div>
    </div>
</div>
