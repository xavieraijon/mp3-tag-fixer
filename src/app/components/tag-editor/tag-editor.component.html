<app-modal (closeModal)="cancelEdit.emit()">
  <!-- Header Content: Cover + Title/Artist -->
  <div header class="flex items-center gap-4 w-full">
    @if (coverImageUrl()) {
      <img
        [src]="coverImageUrl()"
        alt="Cover"
        class="w-14 h-14 rounded-lg object-cover shadow-md border border-slate-200 dark:border-slate-700 flex-shrink-0"
      />
    } @else {
      <div
        class="w-14 h-14 rounded-lg bg-indigo-100 dark:bg-indigo-900/40 flex items-center justify-center flex-shrink-0"
      >
        <lucide-icon name="music" class="w-7 h-7 text-indigo-600 dark:text-indigo-400"></lucide-icon>
      </div>
    }
    <div class="flex-1 min-w-0">
      <h2 class="text-lg font-bold text-slate-800 dark:text-slate-100 truncate">
        {{ title() || 'Edit Tags' }}
      </h2>
      <p class="text-sm text-slate-500 dark:text-slate-400 truncate">
        {{ artist() || 'Unknown Artist' }}
      </p>
    </div>
  </div>

  <!-- Body Content -->
  <div class="space-y-4">
    <div class="grid grid-cols-12 gap-3">
      <!-- Row 1: Title (8) + Track (2) + Disc (2) -->
      <div class="col-span-12 sm:col-span-8">
        <app-input label="Title" [(value)]="title" placeholder="Track Title"></app-input>
      </div>
      <div class="col-span-6 sm:col-span-2">
        <app-input label="Track" [(value)]="trackNumber" type="number" placeholder="1"></app-input>
      </div>
      <div class="col-span-6 sm:col-span-2">
        <app-input label="Disc" [(value)]="discNumber" placeholder="1/1"></app-input>
      </div>

      <!-- Row 2: Artist (6) + Album Artist (6) -->
      <div class="col-span-12 sm:col-span-6">
        <app-input label="Artist" [(value)]="artist" placeholder="Artist Name"></app-input>
      </div>
      <div class="col-span-12 sm:col-span-6">
        <app-input label="Album Artist" [(value)]="albumArtist" placeholder="Album Artist"></app-input>
      </div>

      <!-- Row 3: Album (8) + Year (4) -->
      <div class="col-span-12 sm:col-span-8">
        <app-input label="Album" [(value)]="album" placeholder="Album Name"></app-input>
      </div>
      <div class="col-span-12 sm:col-span-4">
        <app-input label="Year" [(value)]="year" type="number" placeholder="2024"></app-input>
      </div>

      <!-- Row 4: Genre (5) + BPM (2) + Label (5) -->
      <div class="col-span-12 sm:col-span-5">
        <app-input label="Genre" [(value)]="genre" placeholder="Genre"></app-input>
      </div>
      <div class="col-span-6 sm:col-span-2">
        <app-input label="BPM" [(value)]="bpm" type="number" placeholder="120"></app-input>
      </div>
      <div class="col-span-6 sm:col-span-5">
        <app-input label="Label" [(value)]="label" placeholder="Record Label"></app-input>
      </div>

      <!-- Row 5: Composer (12) -->
      <div class="col-span-12">
        <app-input label="Composer" [(value)]="composer" placeholder="Composer Name"></app-input>
      </div>

      <!-- Row 6: Comment (12) -->
      <div class="col-span-12">
        <app-input label="Comment" [(value)]="comment" placeholder="Add a comment..."></app-input>
      </div>
    </div>
  </div>

  <!-- Footer Content -->
  <ng-container footer>
    <app-button variant="ghost" palette="neutral" (click)="cancelEdit.emit()">Cancel</app-button>
    <app-button variant="solid" palette="primary" (click)="onSave()">Save Changes</app-button>
  </ng-container>
</app-modal>
